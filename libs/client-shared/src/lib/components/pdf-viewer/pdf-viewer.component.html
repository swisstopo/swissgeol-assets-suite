<div class="viewer-wrapper">
  @if (!hideHeader()) {
    <asset-sg-pdf-viewer-header
      (downloadPdf)="downloadPdf()"
      (closeViewer)="onCloseViewer()"
      [(selectedPdf)]="selectedPdf"
      [assetPdfs]="assetPdfs()"
      [hidePdfSelection]="hidePdfSelection()"
      [hideDownloadButton]="hideDownloadButton()"
      [hideCloseButton]="hideCloseButton()"
    ></asset-sg-pdf-viewer-header>
  }

  <div class="viewer">
    @if (isRendering() || hasError()) {
      <mat-progress-bar
        class="viewer__loading"
        [class.viewer__loading--error]="hasError()"
        [mode]="hasError() ? 'determinate' : 'indeterminate'"
        [value]="100"
      ></mat-progress-bar>
    }
    <div #pdf class="viewer__page-wrapper" [class.viewer__page-wrapper--is-zoomed]="isZoomed()"></div>

    <div class="viewer__button-container viewer__navigation">
      <asset-sg-pdf-viewer-navigation
        [currentPage]="currentPage() >= 0 ? currentPage() : undefined"
        [pageCount]="pageCount() >= 0 ? pageCount() : undefined"
        [disableInteractions]="isRendering()"
        (navigate)="handleNavigation($event)"
      ></asset-sg-pdf-viewer-navigation>
    </div>
    <div class="viewer__interaction">
      <div class="viewer__button-container">
        <asset-sg-pdf-viewer-zoom
          (zoom)="handleZoom($event)"
          [disableInteractions]="isRendering()"
          [isAtMinZoomLevel]="zoom() === minZoomLevel"
          [isAtMaxZoomLevel]="zoom() === maxZoomLevel"
        ></asset-sg-pdf-viewer-zoom>
      </div>
      <div class="viewer__button-container">
        <asset-sg-pdf-viewer-rotate
          (rotateClockwise)="handleRotation()"
          [disableInteractions]="isRendering()"
        ></asset-sg-pdf-viewer-rotate>
      </div>
    </div>
  </div>
</div>
