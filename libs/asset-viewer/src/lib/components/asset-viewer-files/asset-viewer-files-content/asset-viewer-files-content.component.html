<cdk-accordion class="collapsible">
  <cdk-accordion-item #accordionItem="cdkAccordionItem" (click)="accordionItem.toggle()" class="collapsible__header">
    <div class="collapsible__header__toggle" data-testid="content-toggle">
      <sgc-icon size="large" [name]="accordionItem.expanded ? 'chevronDown' : 'chevronRight'"></sgc-icon>
      <span>{{ "search.content" | translate }}:</span>
    </div>
    @if (!accordionItem.expanded) {
      <asset-sg-asset-viewer-files-content-summary
        [languages]="groupedPageClassifications().languages"
        [categories]="pageCategories()"
        [pageCount]="pageCount()"
        [legalDocCode]="legalDocCode()"
      />
    }
  </cdk-accordion-item>
  @if (accordionItem.expanded) {
    <div
      class="collapsible__body"
      role="region"
      [style.display]="accordionItem.expanded ? '' : 'none'"
      [attr.id]="'accordion-body'"
      [attr.aria-labelledby]="'accordion-header'"
      data-testid="content-body"
    >
      @for (group of groupedPageClassifications().groupedPageClassifications; track group.category) {
        <dl [attr.data-testid]="'category-' + group.category">
          <dt translate>
            {{ "pageClassificationCodes." + group.category }}
          </dt>
          @for (classification of group.classifications; track classification) {
            <dd>
              <button (click)="this.openPdfOnPage(classification.from)">
                {{ "pageClassificationCodes." + group.category | translate }}
              </button>
              @if (classification.languages.length > 0) {
                <span class="tag-group">
                  @for (language of classification.languages; track language) {
                    <asset-sg-asset-viewer-files-tag variant="small" [attr.data-testid]="'language-' + language">{{
                      language.toUpperCase()
                    }}</asset-sg-asset-viewer-files-tag>
                  }
                </span>
              }
              <span class="range-divider"></span>
              <span class="page-range">
                @if (classification.from === classification.to) {
                  {{ classification.from }}
                } @else {
                  {{ classification.from }} - {{ classification.to }}
                }
              </span>
            </dd>
          }
        </dl>
      }
    </div>
  }
</cdk-accordion>
