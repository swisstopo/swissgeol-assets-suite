<div class="file" *rxFor="let assetFile of files">
  <div class="file__info">
    <div class="file__info__metadata">
      <sgc-icon name="file"></sgc-icon>
      <span class="file__info__file-name">{{ assetFile | fileName }}</span>
      @if (locale$ | async; as locale) {
        <asset-sg-asset-viewer-files-tag>{{ assetFile | fileSize: locale }}</asset-sg-asset-viewer-files-tag>
      }
    </div>
    <div class="file__info__actions">
      <sgc-button
        [isDisabled]="isActiveFileDownload(assetFile, 'open-in-tab')"
        [title]="'search.openFileInNewTab' | translate: { fileName: assetFile | fileName }"
        (click)="downloadFile(assetFile, 'open-in-tab')"
      >
        @if (!isActiveFileDownload(assetFile, "open-in-tab")) {
          <sgc-icon name="openLink"></sgc-icon>
        } @else {
          <mat-progress-spinner mode="indeterminate" [diameter]="20" />
        }
      </sgc-button>
      <sgc-button
        [isDisabled]="isActiveFileDownload(assetFile, 'save-file')"
        [title]="'search.downloadFile' | translate: { fileName: assetFile | fileName }"
        (click)="downloadFile(assetFile, 'save-file')"
      >
        @if (!isActiveFileDownload(assetFile, "save-file")) {
          <sgc-icon name="download"></sgc-icon>
        } @else {
          <mat-progress-spinner mode="indeterminate" [diameter]="20" />
        }
      </sgc-button>
    </div>
  </div>

  @if (assetFile.pageClassifications) {
    <hr class="divider" />
    <asset-sg-asset-viewer-files-content
      [pageClassifications]="assetFile.pageClassifications"
      [pageCount]="assetFile.pageCount"
      [legalDocCode]="assetFile.legalDocCode"
    ></asset-sg-asset-viewer-files-content>
  } @else if (assetFile.pageCount || assetFile.legalDocCode) {
    <asset-sg-asset-viewer-files-content-summary
      [pageCount]="assetFile.pageCount"
      [legalDocCode]="assetFile.legalDocCode"
    ></asset-sg-asset-viewer-files-content-summary>
  }
</div>
