<form [formGroup]="formGroup">
  <asset-sg-detail-section [title]="'workgroup.title' | translate">
    <div content>
      <asset-sg-select
        [title]="'workgroup.title' | translate"
        [values]="availableWorkgroups$ | push"
        [bindLabel]="'name'"
        [bindKey]="'id'"
        formControlName="workgroupId"
      ></asset-sg-select>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.general.title' | translate">
    <div content>
      <div class="content">
        <asset-sg-text-input
          [title]="'edit.tabs.general.publicTitle' | translate"
          formControlName="titlePublic"
        ></asset-sg-text-input>
        <asset-sg-text-input
          [title]="'edit.tabs.general.originalTitle' | translate"
          formControlName="titleOriginal"
        ></asset-sg-text-input>
      </div>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.general.date' | translate">
    <div content>
      <div class="content">
        <asset-sg-date-picker
          [title]="'edit.tabs.general.creationDate' | translate"
          formControlName="creationDate"
        ></asset-sg-date-picker>
        <asset-sg-date-picker
          [title]="'edit.tabs.general.dateReceived' | translate"
          formControlName="receiptDate"
        ></asset-sg-date-picker>
      </div>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.general.type' | translate">
    <div content>
      <div class="content">
        <asset-sg-select
          [title]="'edit.tabs.general.type' | translate"
          [values]="assetKindItems$ | push"
          [bindLabel]="'value'"
          [bindKey]="'code'"
          formControlName="assetKindItemCode"
        ></asset-sg-select>
        <asset-sg-select
          [title]="'edit.tabs.general.language' | translate"
          [values]="languages"
          [bindLabel]="'name'"
          [bindKey]="'value'"
          multiple
          [ngModel]="selectedLanguages"
          (ngModelChange)="setLangFromLangs($event)"
          [ngModelOptions]="{ standalone: true }"
        ></asset-sg-select>
        <asset-sg-select
          [title]="'edit.tabs.general.format' | translate"
          [values]="assetFormatItems$ | push"
          [bindLabel]="'value'"
          [bindKey]="'code'"
          formControlName="assetFormatItemCode"
        ></asset-sg-select>
      </div>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.usage.nationalInterest' | translate">
    <div content>
      <mat-checkbox formControlName="isNatRel" color="primary"
        ><span translate>edit.tabs.usage.nationalInterest</span>
      </mat-checkbox>
      <div class="content">
        <asset-sg-select
          [title]="'edit.tabs.usage.type' | translate"
          [values]="natRelItems$ | push"
          [bindLabel]="'value'"
          [bindKey]="'code'"
          [triggerLabel]="
            (selectedNatRelItems.length === 1 ? 'edit.tabs.usage.type' : 'edit.tabs.usage.types') | translate
          "
          shouldShowTrigger
          multiple
          formControlName="typeNatRels"
        ></asset-sg-select>
      </div>
      <mat-chip-set>
        @for (topic of selectedNatRelItems; track topic.code) {
          <asset-sg-chip type="secondary" icon="cancel" (click)="removeItemFromForm(topic, 'typeNatRels')"
            >{{ topic.value | smartTranslate }}
          </asset-sg-chip>
        }
      </mat-chip-set>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.general.topic' | translate">
    <div content>
      <div class="content">
        <asset-sg-select
          [title]="'edit.tabs.general.topic' | translate"
          [values]="manCatLabelItems$ | push"
          [bindLabel]="'value'"
          [bindKey]="'code'"
          [triggerLabel]="
            (selectedManCatLabels.length === 1 ? 'edit.tabs.general.topic' : 'edit.tabs.general.topics') | translate
          "
          shouldShowTrigger
          multiple
          formControlName="manCatLabelRefs"
        ></asset-sg-select>
      </div>
      <mat-chip-set>
        @for (topic of selectedManCatLabels; track topic.code) {
          <asset-sg-chip type="secondary" icon="cancel" (click)="removeItemFromForm(topic, 'manCatLabelRefs')"
            >{{ topic.value | smartTranslate }}
          </asset-sg-chip>
        }
      </mat-chip-set>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.general.alternativeId' | translate">
    <div actions>
      <button asset-sg-secondary (click)="addNewAlternativeId()" translate>
        edit.tabs.general.addNewAlternativeId
        <svg-icon key="add"></svg-icon>
      </button>
    </div>
    <div content>
      <div class="content column">
        <asset-sg-asset-editor-id-list [control]="formGroup.controls.ids" />
        <asset-sg-text-input
          disabled
          [value]="sgsId?.toString() ?? ''"
          [title]="'edit.tabs.general.sgsId' | translate"
        ></asset-sg-text-input>
      </div>
    </div>
  </asset-sg-detail-section>
</form>
