<form [formGroup]="form">
  <asset-sg-detail-section [title]="'workgroup.title' | translate">
    <div content>
      <asset-sg-select
        [title]="'workgroup.title' | translate"
        [values]="availableWorkgroups$ | push"
        [bindLabel]="'name'"
        [bindKey]="'id'"
        errorMessage="{{ hasReferences ? ('edit.tabs.general.referencesWarning' | translate) : '' }}"
        isRequired
        formControlName="workgroupId"
      ></asset-sg-select>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.general.title' | translate">
    <div class="content" content>
      <asset-sg-text-area
        [title]="'edit.tabs.general.publicTitle' | translate"
        isRequired
        formControlName="titlePublic"
      ></asset-sg-text-area>
      <asset-sg-text-area
        [title]="'edit.tabs.general.originalTitle' | translate"
        formControlName="titleOriginal"
      ></asset-sg-text-area>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.general.date' | translate">
    <div class="content" content>
      <asset-sg-date-picker
        [title]="'edit.tabs.general.creationDate' | translate"
        isRequired
        formControlName="creationDate"
      ></asset-sg-date-picker>
      <asset-sg-date-picker
        [title]="'edit.tabs.general.dateReceived' | translate"
        isRequired
        formControlName="receiptDate"
      ></asset-sg-date-picker>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.general.type' | translate">
    <div class="content" content>
      <asset-sg-select
        [title]="'edit.tabs.general.type' | translate"
        [values]="assetKindItems$ | push"
        [bindLabel]="'value'"
        [bindKey]="'code'"
        isRequired
        formControlName="assetKindItemCode"
      ></asset-sg-select>
      <asset-sg-select
        [title]="'edit.tabs.general.language' | translate"
        [values]="languageItems$ | push"
        [bindLabel]="'value'"
        [bindKey]="'code'"
        multiple
        [ngModel]="selectedLanguages"
        (ngModelChange)="setLangFromLangs($event)"
        [ngModelOptions]="{ standalone: true }"
      ></asset-sg-select>
      <asset-sg-select
        [title]="'edit.tabs.general.format' | translate"
        [values]="assetFormatItems$ | push"
        [bindLabel]="'value'"
        [bindKey]="'code'"
        isRequired
        formControlName="assetFormatItemCode"
      ></asset-sg-select>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.general.access.name' | translate">
    <div class="content column" content>
      <div>
        <asset-sg-select
          [title]="'edit.tabs.general.access.name' | translate"
          [values]="restrictionItems"
          [bindLabel]="'label'"
          [bindKey]="'key'"
          formControlName="isPublic"
        ></asset-sg-select>
      </div>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.usage.nationalInterest' | translate">
    <div class="content column" content>
      <mat-checkbox formControlName="isNatRel" color="primary"
        ><span translate>edit.tabs.usage.nationalInterest</span>
      </mat-checkbox>
      <div>
        <asset-sg-select
          [title]="'edit.tabs.usage.type' | translate"
          [values]="natRelItems$ | push"
          [bindLabel]="'value'"
          [bindKey]="'code'"
          [trigger]="(selectedNatRelItems.length === 1 ? 'edit.tabs.usage.type' : 'edit.tabs.usage.types') | translate"
          multiple
          formControlName="typeNatRels"
        ></asset-sg-select>
        <mat-chip-set>
          @for (topic of selectedNatRelItems; track topic.code) {
            <asset-sg-chip type="primary" icon="cancel" (click)="removeItemFromForm(topic, 'typeNatRels')"
              >{{ topic.value | smartTranslate }}
            </asset-sg-chip>
          }
        </mat-chip-set>
      </div>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.general.topic' | translate">
    <div content class="content column">
      <asset-sg-select
        [title]="'edit.tabs.general.topic' | translate"
        [values]="manCatLabelItems$ | push"
        [bindLabel]="'value'"
        [bindKey]="'code'"
        [trigger]="
          (selectedManCatLabels.length === 1 ? 'edit.tabs.general.topic' : 'edit.tabs.general.topics') | translate
        "
        isRequired
        multiple
        formControlName="manCatLabelRefs"
      ></asset-sg-select>
      <mat-chip-set>
        @for (topic of selectedManCatLabels; track topic.code) {
          <asset-sg-chip type="primary" icon="cancel" (click)="removeItemFromForm(topic, 'manCatLabelRefs')"
            >{{ topic.value | smartTranslate }}
          </asset-sg-chip>
        }
      </mat-chip-set>
    </div>
  </asset-sg-detail-section>
  <asset-sg-detail-section [title]="'edit.tabs.general.alternativeId' | translate">
    <div actions>
      <button asset-sg-secondary (click)="addNewAlternativeId()" translate>
        edit.tabs.general.addNewAlternativeId
        <svg-icon key="add"></svg-icon>
      </button>
    </div>
    <div class="content column" content>
      <asset-sg-asset-editor-id-list [control]="form.controls.ids" />
      <asset-sg-text-input
        disabled
        [value]="asset?.sgsId?.toString() ?? ''"
        [title]="'edit.tabs.general.sgsId' | translate"
      ></asset-sg-text-input>
    </div>
  </asset-sg-detail-section>
</form>
