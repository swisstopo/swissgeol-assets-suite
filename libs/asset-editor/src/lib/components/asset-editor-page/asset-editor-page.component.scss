@use "../../styles/mixins";
@use "../../styles/variables";

$min-content-width: 600px;
$max-pdf-width: 580px;

.loading-bar {
  position: absolute;
  inset: 0;
  z-index: 100;
  background-color: variables.$grey-03;
}

.main {
  display: grid;
  grid-template-rows: auto 1fr;
  grid-template-areas:
    "navbar"
    "content";
  height: calc(100vh - #{variables.$app-bar-height});

  & .navbar {
    grid-area: navbar;

    & .spacer {
      flex: 1;
    }

    & .asset-title {
      @include mixins.text-ellipsis(2);
      max-width: 70vw;
      font-size: 16px;
    }
  }

  & .content {
    display: grid;
    grid-area: content;
    grid-template-columns: auto // editor-navigation
      minmax($min-content-width, 1fr) // editor-content: grows from $min-content-width to fill remaining space
      minmax(0, $max-pdf-width); // pdf-preview: shrinks to 0 from $max-pdf-width
    grid-template-areas: "editor-navigation editor-content pdf-preview";
    min-height: 0;

    &.pdf-preview-hidden {
      grid-template-columns: auto 1fr 0;
    }

    & .editor-navigation {
      grid-area: editor-navigation;
    }

    & .form-container {
      grid-area: editor-content;
      display: grid;
      grid-template-rows: 1fr 56px;
      grid-template-areas:
        "form-data"
        "form-footer";
      min-height: 0;
      min-width: $min-content-width;

      & .form-data {
        grid-area: form-data;
        display: flex;
        background-color: variables.$grey-01;
        overflow-y: scroll;
        flex-direction: column;
        align-items: center;
      }

      & .form-footer {
        grid-area: form-footer;
        max-width: 100%;
      }
    }

    & .pdf-preview {
      grid-area: pdf-preview;
      max-width: $max-pdf-width;
      min-width: 0;
      width: 100%;
      position: relative;
      min-height: 0;

      & .pdf-viewer-wrapper {
        overflow: hidden;
        height: 100%;
      }

      & .pdf-preview-toggle {
        position: absolute;
        left: -44px;
        display: flex;
        justify-self: flex-end;
        z-index: 10;
        box-shadow: 4px 4px 2px 0 #0000001f;
        height: 44px;
        width: 44px;

        &::part(button) {
          border-radius: 0 0 0 4px;
        }
      }
    }
  }
}
